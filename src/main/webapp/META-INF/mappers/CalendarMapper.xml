<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.awoo.dao.CalendarDAO">
<!-- //test Commit//test Commit -->
	<select id="selectSchedule" resultType="CalendarVO">
		select cal_id, cal_title, cal_place,
			DATE_FORMAT(cal_start, '%Y-%c-%e %H:%i') as cal_start,
			DATE_FORMAT(cal_end, '%Y-%c-%e %H:%i') as cal_end,
			cal_allday, cal_show, cal_notice, cal_content, empno, check_admin, approval
		from calendar
	</select>
	
	<select id="selectRestData" resultType="CalendarVO">
		select cal_id, cal_title, cal_place,
			DATE_FORMAT(cal_start, '%Y-%c-%e %H:%i') as cal_start,
			DATE_FORMAT(cal_end, '%Y-%c-%e %H:%i') as cal_end,
			cal_allday, cal_show, cal_notice, cal_content, empno, check_admin, approval
		from calendar
		<where>
			cal_start between #{calStart} and #{calEnd}
<!-- 			DATE(cal_start) = '2022-09-27' -->
		</where>
	</select>
	
	<insert id="insertSchedule">
		insert into calendar(cal_title, cal_place, cal_start, cal_end, cal_allday, cal_show, cal_notice, cal_content, empno, check_admin, approval)
		values (#{calTitle}, #{calPlace}, #{calStart}, #{calEnd}, #{calAllday}, #{calShow}, #{calNotice}, #{calContent}, #{empno}, #{checkAdmin}, #{approval})
	</insert>
	


<!-- 	<select id="selectCommuting" parameterType="Map" resultType="CommutingVO"> -->
<!-- 		select id, workday, DATE_FORMAT(start_time, '%H:%i') as start_time, DATE_FORMAT(end_time, '%H:%i') as end_time, work_time, over_time, empno -->
<!-- 		from commuting   -->
<!-- 		<where> -->
<!-- 			empno=#{empno} -->
			
<!-- 			<if test="month == null"> -->
<!-- 				and 1=1 -->
<!-- 			</if> -->
<!-- 			<if test="year == null"> -->
<!-- 				and 1=1 -->
<!-- 			</if> -->
<!-- 			<if test="month != null"> -->
<!-- 				and DATE_FORMAT(workday, '%m') = #{month} -->
<!-- 			</if> -->
<!-- 			<if test="year != null"> -->
<!-- 				and DATE_FORMAT(workday, '%Y') = #{year} -->
<!-- 			</if> -->
<!-- 		</where> -->
<!-- 		order by workday desc; -->
<!-- 	</select> -->
<!-- 	<insert id="insertEnter" keyProperty="id"> -->
<!-- 		INSERT INTO commuting(start_time, empno, over_time)  -->
<!-- 		VALUES (#{startTime}, #{empno}, #{overTime}); -->
<!-- 	</insert> -->
<!-- 	<update id="insertLeave"> -->
<!-- 		update commuting -->
<!-- 			set end_time = #{endTime}, -->
<!-- 				work_time = #{workTime}, -->
<!-- 				over_time = #{overTime} -->
<!-- 			WHERE empno=#{empno} AND DATE_FORMAT(workday, '%Y-%m-%d') = #{workday}; -->
<!-- 	</update> -->

</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.awoo.dao.profileDAO">

	<select id="select" resultType="profileVO">
		SELECT id 
			 , name
			 , gender
			 , birthday
			 , password
			 , SUBSTRING_INDEX(email, '@', 1)	AS emailf
			 , SUBSTRING_INDEX(email, '@', -1)	AS emails
			 , tel_number
			 , phone_number
			 , address
			 , personal_info.empno 
			 , edepartment
			 , eposition
			 , date_format(ehired_date,'%Y-%m-%d') ehired_date
			 , ehired_type
			 , total_holiday
			 , estatus
			 , check_admin
		  FROM personal_info 
		  JOIN employee_info ON personal_info.empno = employee_info.empno 
		  where  employee_info.empno =  #{emp}
			
	 
	</select>
	
	<update id="updateE">
		
		  
	 UPDATE personal_info 
		SET 
		PASSWORD =#{password} , 
		email	 	= CONCAT(#{emailf},'@',#{emails}),
		tel_number= #{telNumber} ,
		phone_number =#{phoneNumber} ,
		address = #{address}
		where empno =  #{empno}
			 
		 
	</update>  
	

	
</mapper>